machine:
  python:
    version: 2.7.11
  ruby:
    version: 2.3.1
  environment:
    PATH: ${PATH}:gyp

checkout:
  post:
    - git fetch origin gh-pages --depth 10
    - git clone https://chromium.googlesource.com/external/gyp gyp

dependencies:
  pre:
    - sudo apt-get update; sudo apt-get install gyp ninja-build
    - pip install xml2rfc
    - gem install --no-doc kramdown-rfc2629

test:
  override:
    - make NSSDIR=nss

deployment:
  production:
    branch: /.*/
    commands:
      - make ghpages
